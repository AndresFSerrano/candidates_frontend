<div class="min-h-screen bg-gray-50 flex justify-center">
  <div class="w-full max-w-6xl mx-auto px-8 py-12">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-2xl font-semibold text-gray-800">
        Candidates
      </h2>

      <button
        class="px-4 py-2 rounded-lg bg-green-600 text-white text-sm font-medium hover:bg-green-700"
        (click)="onCreate()"
      >
        + New Candidate
      </button>
    </div>

    <div class="rounded-xl border border-gray-200 bg-white shadow-md">
      <table class="w-full border-collapse">
        <thead class="bg-gray-100">
          <tr>
            <th class="th text-left">Name</th>
            <th class="th text-left">Surname</th>
            <th class="th text-center">Seniority</th>
            <th class="th text-center">Years</th>
            <th class="th text-center">Availability</th>
            <th class="th text-center">Actions</th>
          </tr>
        </thead>

        <tbody>
          <ng-container *ngIf="candidates$ | async as candidates">
            <tr
              *ngFor="let c of candidates"
              class="hover:bg-gray-50 transition"
            >
              <td class="td text-left">{{ c.name }}</td>
              <td class="td text-left">{{ c.surname }}</td>
              <td class="td text-center capitalize">
                {{ c.seniority }}
              </td>
              <td class="td text-center">{{ c.years }}</td>
              <td class="td text-center">
                <span
                  class="inline-block px-3 py-1 rounded-full text-xs font-semibold"
                  [ngClass]="
                    c.availability
                      ? 'bg-green-100 text-green-700'
                      : 'bg-red-100 text-red-700'
                  "
                >
                  {{ c.availability ? 'Available' : 'Unavailable' }}
                </span>
              </td>
              <td class="td text-center">
                <div class="flex justify-center gap-2">
                  <button
                    type="button"
                    class="px-3 py-1 text-xs rounded-md bg-blue-100 text-blue-700 hover:bg-blue-200"
                    (click)="onEdit(c)"
                  >
                    Edit
                  </button>

                  <button
                    type="button"
                    class="px-3 py-1 text-xs rounded-md bg-red-100 text-red-700 hover:bg-red-200"
                    (click)="onDelete(c.id)"
                  >
                    Delete
                  </button>
                </div>
              </td>
            </tr>

            <tr *ngIf="candidates.length === 0">
              <td
                colspan="6"
                class="text-center py-12 text-gray-500"
              >
                No candidates loaded
              </td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</div>

<app-modal
  [open]="formOpen"
  [title]="selectedCandidate ? 'Edit Candidate' : 'New Candidate'"
  (close)="closeForm()"
>
  <app-candidate-form
    [candidate]="selectedCandidate"
    (submitForm)="onSubmit($event)"
    (cancel)="closeForm()"
  />
</app-modal>

<app-modal
  [open]="deleteOpen"
  title="Confirm delete"
  (close)="closeDelete()"
>
  <div class="space-y-6">
    <p class="text-gray-700">
      Are you sure you want to delete this candidate?
    </p>

    <div class="flex justify-end gap-3">
      <button
        type="button"
        class="px-4 py-2 rounded-md bg-gray-100 hover:bg-gray-200"
        (click)="closeDelete()"
      >
        Cancel
      </button>

      <button
        type="button"
        class="px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700"
        (click)="confirmDelete()"
      >
        Delete
      </button>
    </div>
  </div>
</app-modal>
